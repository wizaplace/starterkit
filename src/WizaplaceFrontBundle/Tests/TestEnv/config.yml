imports:
    - { resource: security.yml }

parameters:
    locale: fr
    recaptcha.key: 'dummy_key'
    api.base_url: 'http://wizaplace.loc/api/v1/'
    slug.regexp: !php/const:Wizaplace\SDK\Seo\SeoService::SLUG_REGEXP
    wizaplace.system_user_password: 'FakeSecret'

framework:
    test: ~
    #esi: ~
    translator:
        fallbacks: ["%locale%"]
        paths: ["%kernel.project_dir%/var/translations"]
    secret: 'secret'
    router:
        resource: '%kernel.root_dir%/routing.yml'
        strict_requirements: true
    profiler:
        collect: false
    form: ~
    csrf_protection: ~
    validation: { enable_annotations: true }
    #serializer: { enable_annotations: true }
    templating:
        engines: ['twig']
    default_locale: '%locale%'
    trusted_hosts: ~
    session:
        storage_id: session.storage.mock_file
        handler_id: session.handler.native_file
        save_path: '%kernel.project_dir%/var/WizaplaceFrontBundle/sessions/%kernel.environment%'
    fragments: ~
    http_method_override: true
    assets: ~
    php_errors:
        log: true

# Twig Configuration
twig:
    debug: true
    strict_variables: true
    exception_controller: 'WizaplaceFrontBundle\Tests\TestEnv\Controller\ExceptionController:showAction'

web_profiler:
    toolbar: false
    intercept_redirects: false

monolog:
    handlers:
        main:
            type: stream
            path: "%kernel.logs_dir%/%kernel.environment%.log"
            level: debug
            channels: ['!event']

services:
    WizaplaceFrontBundle\Tests\TestEnv\Service\TwigEngineLogger:
        decorates: templating.engine.twig
        arguments: [ '@WizaplaceFrontBundle\Tests\TestEnv\Service\TwigEngineLogger.inner' ]
        public: true
    WizaplaceFrontBundle\Tests\TestEnv\Controller\ExceptionController:
        autowire: true
        parent: twig.controller.exception
    VCR\Configuration:
        calls:
            - ['setMode', [!php/const:VCR\VCR::MODE_ONCE]]
    WizaplaceFrontBundle\Tests\TestEnv\Service\VcrGuzzleMiddleware:
        autowire: true
    wizaplace.guzzle.decorating_handler2:
        factory: 'GuzzleHttp\HandlerStack::create'
        class: 'GuzzleHttp\HandlerStack'
        decorates: 'wizaplace.guzzle.handler'
        arguments: ['@wizaplace.guzzle.decorating_handler2.inner']
        calls:
            - ['push', ['@WizaplaceFrontBundle\Tests\TestEnv\Service\VcrGuzzleMiddleware']]
