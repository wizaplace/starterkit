{% if app.user %}

    {# user account links #}
    <div class="content">
        <ul class="list-unstyled profile-links">
            <li><a href="{{ path('profile') }}"><i class="fa fa-user-circle-o"></i>{{ 'my_profile'|trans }}</a></li>
            <li><a href="{{ path('profile_orders') }}"><i class="fa fa-shopping-basket"></i>{{ 'my_purchases'|trans }}</a></li>
            <li><a href="{{ path('profile_messages') }}"><i class="fa fa-envelope-open-o"></i>{{ 'my_messaging_service'|trans }}</a></li>
            <li><a href="{{ path('logout', { 'csrf_token': csrf_token('logout_token') }) }}" class="btn btn-default logout">{{ 'logout_self'|trans }}<i class="fa fa-times"></i></a></li>
        </ul>
    </div>

{% else %}

    {# login form #}
    <div class="content popunder-login" id="popunder-login">
        <p class="title">{{ 'login_self'|trans }}</p>
        <form method="post" action="{{ path('login') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token('login_token') }}">
            <input type="hidden" name="redirect_url" value="{{ app.request.uri }}">

            {# email #}
            <div class="form-group">
                <input type="email" class="form-control" name="email" placeholder="{{ 'email_placeholder'|trans }}" required>
            </div>

            {# password #}
            <div class="form-group">
                <input type="password" class="form-control" name="password" placeholder="{{ 'password'|trans }}..." required>
                <a href="#password-reset-modal" data-toggle="modal" rel="nofollow" class="forgotten-password">{{ 'forgotten_password'|trans }}</a>
            </div>

            {# submit login form #}
            <button type="submit" class="btn btn-primary validate">
                <span>{{ 'validate'|trans }}</span>
                <i class="fa fa-check"></i></button>
            </button>
        </form>

        {# switch popunders (show register form) #}
        <button class="switch-popunder btn btn-default">
            <span>{{ 'create_my_account'|trans }}</span>
            <i class="fa fa-chevron-right"></i>
        </button>
    </div>

    {# register form #}
    <div class="content popunder-register hidden" id="popunder-register">
        <p class="title">{{ 'create_my_account'|trans }}</p>
        <form method="post" action="{{ path('register') }}">
            <input type="hidden" name="redirect_url" value="{{ app.request.uri }}">

            {# email #}
            <div class="form-group">
                <input type="email" class="form-control" name="email" placeholder="{{ 'email_placeholder'|trans }}" required>
            </div>

            {# password #}
            <div class="form-group">
                <input type="password" class="form-control" name="password" placeholder="{{ 'password'|trans }}..." required>
            </div>

            {# terms #}
            <div class="form-group">
                <label class="checkbox terms">
                    <input type="checkbox" name="terms" value="1" required>
                    <span class="input-label">{{ 'terms_of_service_acceptance'|trans({'%link%': '#'})|raw }}</a>*</span>
                </label>
            </div>

            {# invisible reCaptcha button #}
            <button type="button" class="btn btn-primary trigger-recaptcha validate"
                    id="g-recaptcha-header"
                    data-sitekey="{{ recaptchaKey() }}">

                <span>{{'validate'|trans}}</span>
                <i class="fa fa-check"></i></button>
            </button>

            <button type="submit" class="hidden"></button>
        </form>

        {# switch popunders (show login form) #}
        <button class="switch-popunder btn btn-default">
            <span>{{ 'login_self'|trans }}</span>
            <i class="fa fa-chevron-right"></i>
        </button>
    </div>

{% endif %}

{% block scripts %}
    <script>
        // switch between login popunder and register popunder
        $(".switch-popunder").on("click", function () {
            $(this).closest(".quick-access").find(".content").toggleClass("hidden");
        });
    </script>
{% endblock %}
